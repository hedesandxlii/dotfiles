# Source standard .bashrc
if [ -f /etc/skel/.bashrc ]; then
    . /etc/skel/.bashrc
else
    echo Could not find /etc/skel/.bashrc, no defaults set.
fi

# Source any host specific configs.
if [ -f ~/.bash_hostspecific ]; then
    . ~/.bash_hostspecific
fi

# Vim-mode for bash
set -o vi

export EDITOR='vim'

# Used to wrap text in color using escape codes and then adding that to PS1
# $1 text to be wrapped
# $2 color, string.
add_to_PS1() {
    reset="\[\e[0m\]"
    case $2 in
        green)
            PS1+="\[\e[32m\]$1${reset}"
            ;;
        yellow)
            PS1+="\[\e[33m\]$1${reset}"
            ;;
        blue)
            PS1+="\[\e[34m\]$1${reset}"
            ;;
        cyan)
            PS1+="\[\e[36m\]$1${reset}"
            ;;
        *)
            PS1+=$1
            ;;
    esac
}

set_my_PS1() {
    unset PS1
    add_to_PS1 "\u" green
    add_to_PS1 "@"
    add_to_PS1 "\h" cyan
    add_to_PS1 ":"
    add_to_PS1 "\w" blue
    add_to_PS1 " - "
    if [ $VIM ]; then add_to_PS1 "[VIM :sh]" yellow; fi
    add_to_PS1 '[$(git branch 2>/dev/null | grep "^*" | colrm 1 2)]' green
    add_to_PS1 "\n\$ "
}
set_my_PS1

# Trim lenght of prompt.
export PROMPT_DIRTRIM=2

# Change title of window to current directory
PROMPT_COMMAND_BASE="\033]0;$(whoami)@$(hostname) | $(dirs)"
lastcmd() {
    LASTCMD=$(history 1 | cut -c8-)
    echo -ne "$PROMPT_COMMAND_BASE | $LASTCMD \a"
}
PROMPT_COMMAND=lastcmd

# Handy aliases
alias naut='nautilus . > /dev/null &'
alias :q='exit'
alias chrome="chromium-browser"
alias py="python3"
alias tmux='tmux -2'

# git aliases
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st 'status -s'
git config --global alias.unstage 'reset HEAD --'
git config --global alias.unmodify 'checkout --'
git config --global alias.lg 'log --oneline -n10'
git config --global alias.magic 'push origin HEAD:refs/for/master'

# Android development aliases
alias emulator='~/Android/Sdk/emulator/emulator -avd $(~/Android/Sdk/emulator/emulator -list-avds | head -n 1) & '
alias mCurrentFocus='adb shell dumpsys window windows | grep -E mCurrentFocus'
alias logcat='adb logcat'
alias adbtime='adb shell date $(date +%m%d%H%M%Y)'
alias getcrash='adb logcat -d | grep "beginning of crash" -A 30'
